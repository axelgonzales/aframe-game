<html>

<head>
  <meta charset="utf-8" />
  <title>AFrame Dungeon</title>
  <script src="js/aframe-master.js"></script>
  <script src="js/handleEvents.js"></script>
  <!-- <script src="js/animations.js"></script> -->
  <script src="js/movement.js"></script>
  <script src="js/enemy.js"></script>
  <script src="js/player.js"></script>
  <script src="js/aframe-physics-system.min.js"></script>
  <script src="js/aframe-extras.min.js"></script>
  <script>

    if (window.THREE) {
      window.THREE.ImageLoader.prototype.corssOrigin = ''

    }
  </script>
</head>

<body class="a-body">
  <a-scene debug="" physics="debug: true" class="fullscreen" canvas="" inspector="" keyboard-shortcuts="" screenshot=""
    vr-mode-ui="" auto-enter-vr="">
    <a-assets>
      <img id="ghost" src="resources/IronMan.obj" crossorigin="anonymous">
      <a-assets-item id="ironMan" src="resources/IronMan.obj" ccrossorigin="anonymous">></a-assets-item>
      <!-- src="https://ucarecdn.com/f6bf9fe3-82b4-43ba-b5b6-a7e308b64c77/" -->
      <audio id="bg_music" src="resources/bg_music.mp3" preload="auto" ccrossorigin="anonymous">></audio>
      <audio id="fx_punch" src="resources/fx_punch.mp3" preload="auto" ccrossorigin="anonymous">></audio>
      <audio id="fx_teleport" src="resources/fx_teleport.mp3" preload="auto" ccrossorigin="anonymous">></audio>
      <a-asset-items id="casa" src="resources/scene.gltf"></a-asset-items>
      <img id="atack" src="resources/atack.png">
      <img id="defend" src="resources/defender.png">
      <img id="evad" src="resources/evad.png">
    </a-assets>

    <!-- Teleport Sound -->
    <a-entity sound="src:#fx_teleport"></a-entity>

    <!-- Teleport System Spheres -->
    <a-entity id="blueTPSphere" sound="src:#fx_teleport; poolSize:5; volume:0.2" static-movement
      geometry="primitive:sphere;radius:0.2" material="color:blue;roughness:1" position="1.526 2.884 -5.2"></a-entity>
    <a-entity id="blueTPSphere-2" sound="src:#fx_teleport; poolSize:5; volume:0.2" static-movement
      geometry="primitive:sphere;radius:0.2" material="color:blue;roughness:1" position="1.464 2.884 7.124"></a-entity>
    <a-entity id="blueTPSphere-3" sound="src:#fx_teleport; poolSize:5; volume:0.2" static-movement
      geometry="primitive:sphere;radius:0.2" material="color:blue;roughness:1" position="-5.077 2.884 7.124"></a-entity>
    <a-entity id="blueTPSphere-4" sound="src:#fx_teleport; poolSize:5; volume:0.2" static-movement
      geometry="primitive:sphere;radius:0.2" material="color:blue;roughness:1" position="5.395 2.884 7.124"></a-entity>
    <a-entity id="blueTPSphere-5" sound="src:#fx_teleport; poolSize:5; volume:0.2" static-movement
      geometry="primitive:sphere;radius:0.2" material="color:blue;roughness:1" position="1.464 2.884 2.571"></a-entity>

    <!-- Walls -->
    <a-box id="wall_1" color="grey" width="15" height="5" depth="1" position="-0.215 2.5 10.025"
      material="src: resources/block_wall.png" static-body></a-box>
    <a-box id="wall_2" color="grey" width="15" height="5" depth="1" position="-0.215 2.5 -10.794"
      material="src: resources/block_wall.png" static-body></a-box>
    <a-box id="wall_3" color="grey" width="15" height="5" depth="1" position="3.731 2.5 -2.734"
      material="src: resources/block_wall.png" rotation="0 90 0" static-body></a-box>
    <a-box id="wall_4" color="grey" width="15" height="5" depth="1" position="-0.949 2.5 -2.761"
      material="src: resources/block_wall.png" rotation="0 90 0" static-body></a-box>
    <a-box id="wall_5" color="grey" width="10" height="5" depth="1" position="-5.465 2.5 4.268"
      material="src: resources/block_wall.png" static-body></a-box>
    <a-box id="wall_6" color="grey" width="10" height="5" depth="1" position="8.246 2.5 4.268"
      material="src: resources/block_wall.png" static-body></a-box>
    <a-box id="wall_7" color="grey" width="7" height="5" depth="1" position="7.545 2.5 6.966"
      material="src: resources/block_wall.png" static-body rotation="0 90 0">
    </a-box>
    <a-box id="wall_8" color="grey" width="7" height="5" depth="1" position="-7.263 2.5 6.966"
      material="src: resources/block_wall.png" static-body rotation="0 90 0">
    </a-box>

    <!-- Floor. -->
    <a-entity id="floor" static-body geometry="depth:100;height:0.2;width:100;"
      material="src: resources/stone_floor.png; repeat:50 20;color:#fafafa;metalness:0.2;roughness:0.1;"></a-entity>

    <a-entity id="pointLight" light="angle:0;intensity:1.4;type:hemisphere" position="0 19.399 2.231"></a-entity>
    <a-entity light="type: ambient; color: #BBB"></a-entity>

    <!-- Camera. -->
    <a-entity sound="src:#bg_music; autoplay:true; loop:true; volume:0.05" camera id="player" player="health: 200"
      userHeight="1.6" universal-controls kinematic-body="radius:0.5" position="1.464 1.572 2.571">

      <!-- BG Music -->
      <a-entity sound="src:#bg_music"></a-entity>

      <!-- HP Interface -->
      <a-entity position="-0.995 0.662 -1.633" material="src : resources/azulfondo.jpg"
        geometry="primitive:plane;height:3;width:7" text="align:center;color:#fff;value:HP;width:50"
        id="text-health-player" scale="0.1 0.1 0.1"></a-entity>

      <!-- Cursor -->
      <a-entity cursor position="0 0 -0.5" geometry="primitive:ring;radiusInner:0.01;radiusOuter:0.016"
        material="opacity:0.5;shader:flat;transparent:true;color:#ff9" scale="0.8 0.8 0.8" raycaster></a-entity>
    </a-entity>

    <!-- Sky -->
    <a-sky material="src: resources/skyblack.jpeg; repeat:50 20;color:#fafafa;metalness:0.2;roughness:0.1;"></a-sky>

    <!-- Enemies -->
    <a-entity sound="src:#fx_punch; poolSize:5" position="1.351 0 0"  scale="0.1 0.1 0.1"
    id="Ghost02" static-body="shape: box" enemy="health: 100; id: 2" obj-model="obj: resources/UmbreonHighPoly.obj"
    material="src : resources/Umbreon.png">
  </a-entity>

    <a-entity sound="src:#fx_punch; poolSize:5" position="1.351 0 0"  scale="0.1 0.1 0.1" rotation="90 180 180"
      id="Ghost01" static-body="shape: box" enemy="health: 100; id: 1" obj-model="obj: resources/BR_Charizard.obj"
      material="src : resources/Umbreon.png">

      <!-- Bounding Box -->
      <a-box width="15" height="5" depth="3" position="100 0 0" static-body visible="false"></a-box>

      <!-- Punch Sound -->
      <a-entity sound="src:#fx_punch"></a-entity>

      <!-- Animation -->
      <a-animation attribute="position" to="1.351 0 0" direction="alternate-reverse" repeat="indefinite"
        easing="linear" dur="1000"></a-animation>

      <!-- UI -->
      <a-entity position="2 10 10" id="1-ui">
        <a-entity position="0 10 0" material="src : resources/azulfondo.jpg"
          geometry="primitive:plane; width: 7; height: 3;" text="align:center;value:HP;width:50;color:#fff"
          id="text-health-1"></a-entity>

        <a-image src="#atack" position="-10 -2 0" material="color: lightgrey"
          geometry="primitive:plane; width: 7; height: 3;" attack-button="targetEntity: #Ghost01" id="text-attack-1">
        </a-image>


        <a-image src="#defend" position="0 -2 0" material="color: lightgrey"
          geometry="primitive:plane; width: 7; height: 3;" id="text-defend-1"></a-image>

        <a-image src="#evad" position="10 -2 0" material="color: lightgrey"
          geometry="primitive:plane; width: 7; height: 3;" attack-button="targetEntity: #Ghost01" id="text-evad-1">
        </a-image>

      </a-entity>
    </a-entity>

  </a-scene>


</body>

</html>